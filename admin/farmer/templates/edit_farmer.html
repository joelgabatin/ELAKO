{% extends 'admin/admin_base.html' %}

{% block title %}Edit Farmer{% endblock %}

{########################################################################################################################################}

{% block content %}




<div class="container">

    {% for row in edit_user_data %}
  <nav class="mb-2" aria-label="breadcrumb">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item"><a href="#">Farmers</a></li>
      <li class="breadcrumb-item"><a href="#">View All Farmers</a></li>
      <li class="breadcrumb-item active" aria-current="page">Farmer Profile</li>
    </ol>
  </nav>
  <div class="row align-items-center justify-content-between g-3 mb-4">
    <div class="col-auto">
      <h2 class="mb-0">Farmer Profile : {{ row.user_id }}</h2>
    </div>
    <div class="col-auto">
      <div class="row g-2 g-sm-3">
        <div class="col-auto"><a  class="btn btn-phoenix-danger" href="{{ url_for('admin_farmer_bp.delete_farmer', user_id=row.user_id) }}" onclick="return confirmDelete();"><span class="fas fa-trash-alt me-2"></span>Delete Farmer</a></div>
        <div class="col-auto"><a class="btn btn-phoenix-secondary"><span class="fas fa-key me-2"></span> Reset password</a></div>
      </div>
    </div>
  </div>
  <div class="row g-3 mb-6">
    <div class="col-12 col-lg-8">
      <div class="card h-100">
        <div class="card-body">
          <div class="border-bottom border-dashed border-300 pb-4">
            <div class="row align-items-center g-3 g-sm-5 text-center text-sm-start">
              <div class="col-12 col-sm-auto">
                  <input class="d-none" id="avatarFile" type="file" name="image" id="image" accept="image/*">
                  <label class="cursor-pointer avatar avatar-5xl" for="avatarFile">
                      <img class="rounded-circle" src="{{ url_for('static', filename='uploads/farmers/'+ row.profile_picture) }}" alt="image-preview" id="image-preview" alt="Image Preview"></label>
              </div>
              <div class="col-12 col-sm-auto flex-1">
                <h3>Ansolo Lazinatov</h3>
                <p class="text-800">Joined {{ row.created_at.strftime("%B %d, %Y") }}</p>
                <div><a class="me-2" href="#!"><svg class="svg-inline--fa fa-linkedin-in text-400 hover-primary" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M100.3 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.6 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.3 61.9 111.3 142.3V448z"></path></svg><!-- <span class="fab fa-linkedin-in text-400 hover-primary"></span> Font Awesome fontawesome.com --></a><a class="me-2" href="#!"><svg class="svg-inline--fa fa-facebook text-400 hover-primary" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.8 90.69 226.4 209.3 245V327.7h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.3 482.4 504 379.8 504 256z"></path></svg><!-- <span class="fab fa-facebook text-400 hover-primary"></span> Font Awesome fontawesome.com --></a><a href="#!"><svg class="svg-inline--fa fa-twitter text-400 hover-primary" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"></path></svg><!-- <span class="fab fa-twitter text-400 hover-primary"></span> Font Awesome fontawesome.com --></a></div>
              </div>
            </div>
          </div>
          <div class="d-flex flex-between-center pt-4">
            <div class="text-center">
              <h6 class="mb-2 text-800">Review Rating</h6>
              <h4 class="fs-1 text-1000 mb-0">-----</h4>
            </div>
            <div class="text-center">
              <h6 class="mb-2 text-800">Active</h6>
              <h4 class="fs-1 text-1000 mb-0">-----</h4>
            </div>
            <div class="text-center">
              <h6 class="mb-2 text-800">Total Sold Products</h6>
              <h4 class="fs-1 text-1000 mb-0">-----</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="card h-100">
        <div class="card-body">
          <div class="border-bottom border-dashed border-300">
            <h4 class="mb-3 lh-sm lh-xl-1">Default Address </h4>
          </div>
          <div class="pt-4 mb-7 mb-lg-4 mb-xl-7">
            <div class="row justify-content-between">
              <div class="col-auto">
                <h5 class="text-1000">Address</h5>
              </div>
              <div class="col-auto">
                <p class="text-800">{{ row.address }}</p>
              </div>
            </div>
          </div>
          <div class="border-top border-dashed border-300 pt-4">
            <div class="row flex-between-center mb-2">
              <div class="col-auto">
                <h5 class="text-1000 mb-0">Email</h5>
              </div>
              <div class="col-auto"><a class="lh-1" href="mailto:{{ row.email }}">{{ row.email }}</a></div>
            </div>
            <div class="row flex-between-center">
              <div class="col-auto">
                <h5 class="text-1000 mb-0">Phone</h5>
              </div>
              <div class="col-auto"><a href="tel:+{{ row.phone_number }}">{{ row.phone_number }}</a></div>
            </div>
            <div class="row flex-between-center">
              <div class="col-auto">
                <h5 class="text-1000 mb-0">Alternative Phone</h5>
              </div>
              <div class="col-auto"><a href="tel:+{{ row.alternative_phone }}">{{ row.alternative_phone }}</a></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

    {% endfor %}


  <div>
    <div class="scrollbar">
      <ul class="nav nav-underline flex-nowrap mb-3 pb-1" id="myTab" role="tablist">
        <li class="nav-item me-3" role="presentation">
            <a class="nav-link text-nowrap" id="orders-tab" data-bs-toggle="tab" href="#tab-products" role="tab" aria-controls="tab-orders" aria-selected="false" tabindex="-1">
                <span class="fas fa-shopping-cart me-2"></span> Products <span class="text-700 fw-normal"> (35)</span>
            </a>
        </li>
        <li class="nav-item me-3" role="presentation">
            <a class="nav-link text-nowrap" id="reviews-tab" data-bs-toggle="tab" href="#tab-active-bidding" role="tab" aria-controls="tab-orders" aria-selected="false" tabindex="-1">
                <span class="fa-sharp fa-solid fa-gavel"></span> Active Bidding<span class="text-700 fw-normal"> (24)</span>
            </a>
        </li>
        <li class="nav-item me-3" role="presentation">
            <a class="nav-link text-nowrap" id="wishlist-tab" data-bs-toggle="tab" href="#tab-upcoming-bidding" role="tab" aria-controls="tab-orders" aria-selected="false" tabindex="-1">
                <span class="fa-solid fa-stopwatch-20"></span>  Upcoming Bidding
            </a>
        </li>
        <li class="nav-item me-3" role="presentation">
            <a class="nav-link text-nowrap" id="stores-tab" data-bs-toggle="tab" href="#tab-ended-bidding" role="tab" aria-controls="tab-stores" aria-selected="false" tabindex="-1">
                <span class="fa-solid fa-hourglass-end"></span> Ended Bidding
            </a>
        </li>
        <li class="nav-item" role="presentation"><a class="nav-link text-nowrap active" id="personal-info-tab" data-bs-toggle="tab" href="#tab-personal-info" role="tab" aria-controls="tab-personal-info" aria-selected="true"><svg class="svg-inline--fa fa-user me-2" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="user" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"></path></svg><!-- <span class="fas fa-user me-2"></span> Font Awesome fontawesome.com -->Personal info</a></li>
      </ul>
    </div>
    <div class="tab-content" id="profileTabContent">
      <div class="tab-pane fade" id="tab-products" role="tabpanel" aria-labelledby="orders-tab">

                  <div id="members" data-list='{"valueNames":["farmer_id","farmer","username","password","status"],"page":10,"pagination":true}'>
          <div class="row align-items-center justify-content-between g-3 mb-4">
            <div class="col col-auto">
              <div class="search-box">
                <form class="position-relative" data-bs-toggle="search" data-bs-display="static"><input class="form-control search-input search" type="search" placeholder="Search Farmers" aria-label="Search" />
                  <span class="fas fa-search search-box-icon"></span>
                </form>
              </div>
            </div>
            <div class="col-auto">
              <div class="d-flex align-items-center">
                  <button class="btn btn-primary"><span class="fas fa-plus me-2"></span>Add New Farmer</button></div>
            </div>
          </div>
          <div class="mx-n4 mx-lg-n6 px-4 px-lg-6 mb-9 bg-white border-y border-300 mt-2 position-relative top-1">
            <div class="table-responsive scrollbar ms-n1 ps-1">
              <table class="table table-sm fs--1 mb-0">
                <thead>
                  <tr>
                    <th class="sort align-middle" scope="col" data-sort="farmer_id" style="width:15%; min-width:200px;">FARMER ID</th>
                    <th class="sort align-middle" scope="col" data-sort="farmer" style="width:15%; min-width:200px;">FARMER </th>
                    <th class="sort align-middle pe-3" scope="col" data-sort="username" style="width:20%; min-width:200px;">USERNAME</th>
                    <th class="sort align-middle" scope="col" data-sort="password" style="width:10%;">PASSWORD</th>
                    <th class="sort align-middle text-center" scope="col" data-sort="status" style="width:10%;  min-width:200px;">STATUS</th>
                    <th class="sort align-middle pe-0" scope="col" data-sort="action" style="width:30%;  min-width:200px;">ACTION</th>
                  </tr>
                </thead>

                <tbody class="list" id="members-table-body">

                </tbody>
              </table>
            </div>
            <div class="row align-items-center justify-content-between py-2 pe-0 fs--1">
              <div class="col-auto d-flex">
                <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900" data-list-info="data-list-info"></p><a class="fw-semi-bold" href="#!" data-list-view="*">View all<span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span></a><a class="fw-semi-bold d-none" href="#!" data-list-view="less">View Less<span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span></a>
              </div>
              <div class="col-auto d-flex"><button class="page-link" data-list-pagination="prev"><span class="fas fa-chevron-left"></span></button>
                <ul class="mb-0 pagination"></ul><button class="page-link pe-0" data-list-pagination="next"><span class="fas fa-chevron-right"></span></button>
              </div>
            </div>
          </div>
        </div>




      </div>
      <div class="tab-pane fade" id="tab-active-bidding" role="tabpanel" aria-labelledby="orders-tab">
        <div></div>
      </div>
      <div class="tab-pane fade" id="tab-upcoming-bidding" role="tabpanel" aria-labelledby="orders-tab">
        <div></div>
      </div>
      <div class="tab-pane fade" id="tab-ended-bidding" role="tabpanel" aria-labelledby="orders-tab">
        <div></div>
      </div>
      {% for row in edit_user_data %}
      <div class="tab-pane fade active show" id="tab-personal-info" role="tabpanel" aria-labelledby="personal-info-tab">
        <form action="{{ url_for('admin_farmer_bp.edit_farmer', user_id=row.user_id) }}" method="POST" enctype="multipart/form-data">
                <div class="row g-3 mb-5">
                  <div class="col-12 col-lg-6">
                      <label class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm" for="username" required>Username</label>
                      <input class="form-control" id="username" name="username" type="text" value="{{ row.username }}"></div>
                  <div class="col-12 col-lg-6">
                      <label class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm" for="password" required>Password</label>
                      <input class="form-control" id="password" name="password" type="text" value="{{ row.password }}">
                  </div>
                  <div class="col-12 col-lg-6">
                      <label class="form-label text-1000 fs-0 ps-0 text-capitalize lh-sm" for="fullName">Full name</label>
                      <input class="form-control" id="full-name" name="full-name" type="text" placeholder="Full name" value="{{ row.full_name }}">
                  </div>
                  <div class="col-12 col-lg-6"><label class="form-label text-1000 fs-0 ps-0 text-capitalize lh-sm" for="gender">Gender</label>
                      <select class="form-select" id="gender" name="gender">
                        <option value="male" {% if row.gender == 'male' %} selected {% endif %}>Male</option>
                        <option value="female" {% if row.gender == 'female' %} selected {% endif %}>Female</option>
                      </select>
                  </div>
                  <div class="col-12 col-lg-6"><label class="form-label text-1000 fs-0 ps-0 text-capitalize lh-sm" for="email" required>Email</label>
                      <input class="form-control" id="email" name="email" type="email" placeholder="Email" value="{{ row.email }}"></div>
                  <div class="col-12 col-lg-6">
                        <label for="date-of-birth" class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm">Date of Birth</label>
                        <input type="date" class="form-control" name="date-of-birth" id="date-of-birth" required value="{{ row.date_of_birth }}">
                  </div>
                  <div class="col-12 col-lg-6">
                      <label class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm" for="phone" required>Phone</label>
                      <input class="form-control" id="phone-number" name="phone-number" type="text" placeholder="Enter Phone Number" value="{{ row.phone_number }}"></div>
                  <div class="col-12 col-lg-6">
                      <label class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm" for="alternative_phone" required>Alternative phone</label>
                      <input class="form-control" id="alternative-phone" name="alternative-phone" type="text" placeholder="Enter Alternative Phone Number" value="{{ row.alternative_phone }}"></div>
                  <div class="col-12 col-lg-6">
                    <label for="address" class="text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm">Address</label>
                    <textarea class="form-control" name="address" id="address" placeholder="Enter Address" rows=9 required>{{ row.address }}</textarea>
                  </div>
                  <div class="col-lg-6">
                      <div class="row">
                          <div class="col-12 col-lg-12 mb-3">
                              <label class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm" for="facebook" required>Facebook</label>
                              <input class="form-control" id="facebook" name="facebook" type="text" placeholder="Facebook" value="{{ row.facebook }}">
                          </div>
                          <div class="col-12 col-lg-12 mb-3">
                              <label class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm" for="instagram" required>Instagram</label>
                              <input class="form-control" id="instagram" name="instagram" type="text" placeholder="Instagram" value="{{ row.instagram }}">
                          </div>
                          <div class="col-12 col-lg-12 mb-3">
                              <label class="form-label text-1000 fw-bold fs-0 ps-0 text-capitalize lh-sm" for="twitter" required>Twitter</label>
                              <input class="form-control" id="twitter" name="twitter" type="text" placeholder="Twitter" value="{{ row.twitter }}">
                          </div>
                      </div>
                  </div>
                </div>
                <div class="text-end"><button class="btn btn-primary px-7" type="submit">Save changes</button></div>
        </form>
      </div>
      {% endfor %}
    </div>
  </div>
</div><!-- end of .container-->


{% endblock %}

{########################################################################################################################################}

{# include the static css of page#}
{% block page_static_css %}

    <!-- rooms_view CSS -->
    <link rel="stylesheet" href="{{ url_for('admin_farmer_bp.static', filename='css/farmer_view.css') }}">

{% endblock %}

{# include the static js of page#}
{% block page_static_js %}

     <!-- rooms_view JS -->
    <script src="{{  url_for('admin_farmer_bp.static', filename='js/farmer_view.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            $('#avatarFile').on('change', function() {
                var input = this;
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#image-preview').attr('src', e.target.result);
                    };

                    reader.readAsDataURL(input.files[0]);
                }
            });
        });
    </script>
{% endblock %}
